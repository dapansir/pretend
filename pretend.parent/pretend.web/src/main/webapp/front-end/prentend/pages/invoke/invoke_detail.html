<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>调用测试列表页面</title>
    <link rel="stylesheet" href="../../bootstrap-3.3.7/css/bootstrap.css">
    <link rel="stylesheet" href="../../bootstrap-table/bootstrap-table.css">
    <link rel="stylesheet" href="../../css/providerlist.css">
    <script src="../../js/jquery/jquery.min.js"></script>
    <script src="../../bootstrap-3.3.7/js/bootstrap.js"></script>
    <script src="../../bootstrap-table/bootstrap-table.js"></script>
    <script src="../../bootstrap-table/bootstrap-table-zh-CN.js"></script>
    <script src="../../js/tool.js"></script>

</head>
<body>
    <div class=".container">
        <div >
        	<div class="table_center">
                <h3>平盘付款</h3>
                <div class="page-header"></div>
                <form class="form-inline">
                    
                    <div class="row" id="connect">
                        <div class="col-sm-offset-5">
                            <a class="btn btn-success" id="doTest">测试</a>
                        </div>
                    </div>
                </form>
        	</div>
        </div>
    </div>
   	<div style="display:none">
		<div class="row" id="tempalte">
			<div class="form-group col-sm-6 col-md-4 col-sm-offset-1">
				<label for="class" name="label1"></label> 
				<input type="text" class="form-control" id="class" placeholder="">
			</div>
			<div class="form-group col-sm-3 col-md-5 col-sm-offset-1">
				<label for="class" name="label2"></label> 
				<input type="text" class="form-control" id="class" placeholder="">
			</div>
		</div>
	</div>
</body>
<script type="text/javascript">
	var href = window.location.href;
	var id = findParameter(href, "id");
	$.post("../../../../dubbo/getBoInfos.do", {
		"code" : id
	}, function(data) {
		if (undefined == data || null == data || data.length == 0) {
			console.log("编号:" + id + "未查询到相关接口数据");
			return;
		}
		for (var i = 0; i < data.length; i= i+2) {
			var element = $("#tempalte").clone(false);
			$(element).find("[name='label1']").html(data[i].fieldName);
			$(element).find("[name='label1']").next().attr("name",data[i].fieldName);
			if(i+1 < data.length){
				$(element).find("[name='label2']").html(data[i+1].fieldName);
				$(element).find("[name='label2']").next().attr("name",data[i+1].fieldName);
			}
			$(element).insertBefore($("#connect"));
		}
	}, "json");
	
	
	$("#doTest").on("click",function(){
		var send = $(".form-inline").serializeObject();
		$.ajax({
			url:"../../../../dubbo/doTest.do",
			data:JSON.stringify(send),
			success:function(data) {
				if (undefined == data || null == data || data.length == 0) {
					console.log("编号:" + id + "未查询到相关接口数据");
					return;
				}
				alert(data.backMessage);
			},
			contentType:"application/json; charset=UTF-8",
			method:"post",
			dataType:"json"
		});
	});
	
</script>
</html>